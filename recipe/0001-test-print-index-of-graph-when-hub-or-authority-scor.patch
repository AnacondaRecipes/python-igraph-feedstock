From 2a9c85831a89a11fce0c8b500794f60c94bcde42 Mon Sep 17 00:00:00 2001
From: Tamas Nepusz <ntamas@gmail.com>
Date: Sun, 28 Mar 2021 22:11:28 +0200
Subject: [PATCH] test: print index of graph when hub or authority score
 calculation fails in the Graph Atlas unit tests

---
 tests/test_atlas.py | 22 ++++++++++++++++++++--
 1 file changed, 20 insertions(+), 2 deletions(-)

diff --git a/tests/test_atlas.py b/tests/test_atlas.py
index 322a61f..b132755 100644
--- a/tests/test_atlas.py
+++ b/tests/test_atlas.py
@@ -102,7 +102,16 @@ class AtlasTestBase(object):
 
     def testHubScore(self):
         for idx, g in enumerate(self.__class__.graphs):
-            sc = g.hub_score()
+            try:
+                sc = g.hub_score()
+            except Exception as ex:
+                self.assertTrue(
+                    False,
+                    msg="Hub score calculation threw exception for graph #%d: %s"
+                    % (idx, ex),
+                )
+                raise
+
             if g.vcount() == 0:
                 self.assertEqual([], sc)
                 continue
@@ -119,7 +128,16 @@ class AtlasTestBase(object):
 
     def testAuthorityScore(self):
         for idx, g in enumerate(self.__class__.graphs):
-            sc = g.authority_score()
+            try:
+                sc = g.authority_score()
+            except Exception as ex:
+                self.assertTrue(
+                    False,
+                    msg="Authority score calculation threw exception for graph #%d: %s"
+                    % (idx, ex),
+                )
+                raise
+
             if g.vcount() == 0:
                 self.assertEqual([], sc)
                 continue
-- 
2.30.2

